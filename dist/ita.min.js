const ita_default={addition:'<a href="https://www.spid.gov.it">Maggiori informazioni</a><a href="https://www.spid.gov.it/richiedi-spid">Non hai SPID?</a><a href="https://www.spid.gov.it/serve-aiuto">Serve aiuto?</a>',href:function(s,i){return`${i.get("return")}?entityID=${s.entity_id}&return=${i.get("return")}`},url:"https://registry.spid.gov.it/entities-idp?&output=json&custom=info_display_base",idps:[{organization_name:"AArubaPEC S.p.A.",entity_id:"https://loginspid.aruba.it",logo_uri:"img/spid-idp-arubaid.svg"},{organization_name:"InfoCert S.p.A.",entity_id:"https://identity.infocert.it",logo_uri:"img/spid-idp-infocertid.svg"},{organization_name:"IN.TE.S.A. S.p.A.",entity_id:"https://spid.intesa.it",logo_uri:"img/spid-idp-intesaid.svg"},{organization_name:"Lepida S.p.A.",entity_id:"https://id.lepida.it/idp/shibboleth",logo_uri:"img/spid-idp-lepidaid.svg"},{organization_name:"Namirial",entity_id:"https://idp.namirialtsp.com/idp",logo_uri:"img/spid-idp-namirialid.svg"},{organization_name:"Poste Italiane SpA",entity_id:"https://posteid.poste.it",logo_uri:"img/spid-idp-posteid.svg"},{organization_name:"Sielte S.p.A.",entity_id:"https://identity.sieltecloud.it",logo_uri:"img/spid-idp-sielteid.svg"},{organization_name:"Register.it S.p.A.",entity_id:"https://spid.register.it",logo_uri:"img/spid-idp-spiditalia.svg"},{organization_name:"TI Trust Technologies srl",entity_id:"https://login.id.tim.it/affwebservices/public/saml2sso",logo_uri:"img/spid-idp-timid.svg"},{organization_name:"TeamSystem s.p.a.",entity_id:"https://spid.teamsystem.com/idp",logo_uri:"img/spid-idp-teamsystemid.svg"}]};class Ita{constructor(i){Object.assign(this,ita_default,i),this.params=new URLSearchParams(window.location.search),this.elements=document.querySelectorAll(".ita .ita-menu[data-spid-remote]"),this.elements.length>0&&this.start()}async start(){try{const i=await fetch(this.url);i.ok&&this.spid_populate(await i.json())}catch(i){console.log(i),this.spid_populate(this.idps)}}spid_populate(i){const a=i.sort(()=>Math.random()-.5);for(var t=0;t<this.elements.length;t++){this.elements[t].innerHTML=this.addition;for(var e=0;e<i.length;e++)this.add_idp_entry(i[e],this.elements[t])}}add_idp_entry(i,a){let t=document.createElement("a");t.setAttribute("href",this.href(i,this.params)),t.innerHTML=`<img src="${i.logo_uri}" alt="${i.organization_name}">`,a.prepend(t)}}
